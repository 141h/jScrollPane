/*
 * jScrollPane - v2.0.0beta1 - 2010-08-02
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2010 Kelvin Luck
 * Dual licensed under the MIT and GPL licenses.
 */
(function(b,a,c){b.fn.jScrollPane=function(d){d=b.extend({},b.fn.jScrollPane.defaults,d);return this.each(function(){var x=b(this);var A,k;var n=x.data("jsp");if(n==c){n={};x.data("jsp",n)}var o=x.parent(".jspContainer");if(o.length==0){x.css("overflow","hidden");A=x.innerWidth();k=x.innerHeight();x.css("overflow","visible");x.wrap(b("<div />").addClass("jspContainer").css({width:A+"px",height:k+"px"}));o=x.parent()}else{A=o.outerWidth();k=o.outerHeight();o.find(".jspVerticalBar,.jspHorizontalBar").remove().end()}x.css({width:"auto",height:"auto"});var z=x.clone().css("position","absolute");var v=b('<div style="width:1px; position: relative;" />').append(z);b("body").append(v);var s=Math.max(x.outerWidth(),z.outerWidth());v.remove();var w=x.outerHeight();var j=s/A;var B=w/k;var i=B>0.99;var q=j>1;if(!(q||i)){x.removeClass("jspScrollable");x.css("top",0)}else{x.addClass("jspScrollable");var r=function(E,D){return function(){l(E,D);this.blur();return false}};if(i){o.append(b('<div class="jspVerticalBar" />').append(b('<div class="jspCap jspCapTop" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragTop" />'),b('<div class="jspDragBottom" />'))),b('<div class="jspCap jspCapBottom" />')));var p=o.find(">.jspVerticalBar");var y=p.find(">.jspTrack");var g=y.find(">.jspDrag");var h=p.position().left>0?"right":"left";x.css("margin-"+h,(d.gutter+y.outerWidth())+"px");w=x.outerHeight();B=w/k;if(d.showArrows){var C=b('<a href="#" class="jspArrow jspArrowUp">Scroll up</a>').bind("click",r(0,-1));var m=b('<a href="#" class="jspArrow jspArrowDown">Scroll down</a>').bind("click",r(0,1));y.before(C).after(m)}var f=k;o.find(">.jspVerticalBar>.jspCap,>.jspVerticalBar>.jspArrow").each(function(){f-=b(this).outerHeight()});y.height(f+"px");var u=1/B*f;g.height(u+"px");var e=f-u;g.bind("mousedown.jsp",function(E){b("html").bind("dragstart.jsp selectstart.jsp",function(){return false});var D=E.pageY-g.position().top;b("html").bind("mousemove.jsp",function(F){t(F.pageY-D)}).bind("mouseup.jsp mouseleave.jsp",function(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp")});return false});var t=function(D){if(D<0){D=0}else{if(D>e){D=e}}g.css("top",D);o.scrollTop(0);var E=D/e;x.css("top",-E*(w-k))}}var l=function(E,D){}}})};b.fn.jScrollPane.defaults={showArrows:false,gutter:4}})(jQuery,this);