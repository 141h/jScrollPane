/*
 * jScrollPane - v2.0.0beta1 - 2010-08-02
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2010 Kelvin Luck
 * Dual licensed under the MIT and GPL licenses.
 */
(function(b,a,c){b.fn.jScrollPane=function(d){d=b.extend({},b.fn.jScrollPane.defaults,d);return this.each(function(){var y=b(this);var B,k;var n=y.data("jsp");if(n==c){n={};y.data("jsp",n)}var o=y.parent(".jspContainer");if(o.length==0){y.css("overflow","hidden");B=y.innerWidth();k=y.innerHeight();y.css("overflow","visible");y.wrap(b("<div />").addClass("jspContainer").css({width:B+"px",height:k+"px"}));o=y.parent()}else{B=o.outerWidth();k=o.outerHeight();o.find(".jspVerticalBar,.jspHorizontalBar").remove().end()}y.css({width:"auto",height:"auto"});var A=y.clone().css("position","absolute");var v=b('<div style="width:1px; position: relative;" />').append(A);b("body").append(v);var s=Math.max(y.outerWidth(),A.outerWidth());v.remove();var w=y.outerHeight();var j=s/B;var C=w/k;var i=C>0.99;var q=j>1;if(!(q||i)){y.removeClass("jspScrollable");y.css("top",0)}else{y.addClass("jspScrollable");var r=function(F,E){return function(){l(F,E);this.blur();return false}};if(i){o.append(b('<div class="jspVerticalBar" />').append(b('<div class="jspCap jspCapTop" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragTop" />'),b('<div class="jspDragBottom" />'))),b('<div class="jspCap jspCapBottom" />')));var p=o.find(">.jspVerticalBar");var z=p.find(">.jspTrack");var g=z.find(">.jspDrag");var h=p.position().left>0?"right":"left";y.css("margin-"+h,(d.gutter+z.outerWidth())+"px");w=y.outerHeight();C=w/k;if(d.showArrows){var D=b('<a href="#" class="jspArrow jspArrowUp">Scroll up</a>').bind("click",r(0,-1));var m=b('<a href="#" class="jspArrow jspArrowDown">Scroll down</a>').bind("click",r(0,1));z.before(D).after(m)}var f=k;o.find(">.jspVerticalBar>.jspCap,>.jspVerticalBar>.jspArrow").each(function(){f-=b(this).outerHeight()});z.height(f+"px");var u=1/C*f;g.height(u+"px");var e=f-u;var x=0;g.bind("mousedown.jsp",function(F){b("html").bind("dragstart.jsp selectstart.jsp",function(){return false});var E=F.pageY-g.position().top;b("html").bind("mousemove.jsp",function(G){t(G.pageY-E)}).bind("mouseup.jsp mouseleave.jsp",function(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp")});return false});var t=function(E){if(E<0){E=0}else{if(E>e){E=e}}x=E;g.css("top",E);o.scrollTop(0);var F=E/e;y.css("top",-F*(w-k))};o.bind("mousewheel",function(E,G){var F=x;t(x-G*d.mouseWheelSpeed);return F==x})}var l=function(F,E){}}})};b.fn.jScrollPane.defaults={showArrows:false,gutter:4,mouseWheelSpeed:10}})(jQuery,this);